<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN" "http://java.sun.com/dtd/ejb-jar_2_0.dtd">
<ejb-jar>
	<enterprise-beans>		
		<session>
			<display-name>ServiceFiscal</display-name>
			<ejb-name>ServiceFiscal</ejb-name>
			<home>ch.vd.registre.fiscal.service.ServiceFiscalHome</home>
			<remote>ch.vd.registre.fiscal.service.ServiceFiscal</remote>
			<ejb-class>
				ch.vd.uniregctb.fiscal.service.impl.ServiceFiscalBean
			</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Bean</transaction-type>
			<env-entry>
            <env-entry-name>ejb/BeanFactoryPath</env-entry-name>
            <env-entry-type>java.lang.String</env-entry-type>
            <env-entry-value>ejb-beans-definitions</env-entry-value>
        </env-entry>
        <resource-ref>
        	<res-ref-name>jdbc/uniregDataSource</res-ref-name>
        	<res-type>javax.jdbc.DataSource</res-type>
        	<res-auth>Container</res-auth>
        	<res-sharing-scope>Shareable</res-sharing-scope>
        </resource-ref>      
			
		</session>				
		<message-driven>
			<display-name>Service Fiscal Message Driven Bean</display-name>
			<ejb-name>RetourInformationDiMDB</ejb-name>
			<ejb-class>ch.vd.uniregctb.fiscal.service.impl.RetourInformationDiMDB</ejb-class>
			<transaction-type>Container</transaction-type>
			<message-driven-destination>
				<destination-type>javax.jms.Topic</destination-type>
				<subscription-durability>Durable</subscription-durability>
			</message-driven-destination>
			<ejb-ref>
				<ejb-ref-name>ejb/ServiceFiscal</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>ch.vd.registre.fiscal.service.ServiceFiscalHome</home>
				<remote>ch.vd.registre.fiscal.service.ServiceFiscal</remote>
				<ejb-link>ServiceFiscal</ejb-link>
			</ejb-ref>
		</message-driven>
	</enterprise-beans>
	<assembly-descriptor>
		<container-transaction>
	      <method>
	         <ejb-name>RetourInformationDiMDB</ejb-name>
	         <method-name>onMessage()</method-name>
	      </method>
	      <trans-attribute>Required</trans-attribute>
		 </container-transaction>
	</assembly-descriptor>

</ejb-jar>
