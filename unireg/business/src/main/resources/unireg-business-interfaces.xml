<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<!-- Service Infrastructure -->
	
	<bean id="serviceInfrastructureServiceHost" class="ch.vd.uniregctb.interfaces.service.host.ServiceInfrastructureHostInterfaces">
		<property name="serviceInfrastructure" ref="_serviceInfrastructure" />
		<property name="serviceInfrastructureFiscal" ref="_serviceInfrastructureFiscal" />
	</bean>

	<bean id="serviceInfrastructureFidor" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureFidor">
		<property name="fidorClient" ref="fidorClient" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
	</bean>

	<bean id="serviceInfrastructureMarshaller" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureMarshaller">
		<property name="hostService" ref="serviceInfrastructureServiceHost" />
		<property name="fidorService" ref="serviceInfrastructureFidor" />
	</bean>

	<bean id="serviceInfrastructureTracing" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureTracing">
		<property name="target" ref="serviceInfrastructureMarshaller" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceInfrastructureCache" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureCache">
		<property name="target" ref="serviceInfrastructureTracing" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceInfra" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceInfrastructureService" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureImpl">
		<property name="rawService" ref="serviceInfrastructureCache" />
	</bean>

	<!-- Service Civil -->

	<bean id="serviceCivilServiceBase" abstract="true" class="ch.vd.uniregctb.interfaces.service.ServiceCivilServiceBase">
		<property name="infraService" ref="serviceInfrastructureService"/>
	</bean>

	<bean id="serviceCivilServiceHost" class="ch.vd.uniregctb.interfaces.service.host.ServiceCivilServiceHostInterfaces" parent="serviceCivilServiceBase">
		<property name="serviceCivil" ref="_serviceCivil" />
	</bean>

	<bean id="serviceCivilRcPers" class="ch.vd.uniregctb.interfaces.service.rcpers.ServiceCivilRCPers" parent="serviceCivilServiceBase">
		<property name="client" ref="rcPersClient" />
	</bean>

	<bean id="serviceCivilServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServiceCivilTracing">
		<property name="target" ref="serviceCivilRcPers" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceCivilServiceCache" class="ch.vd.uniregctb.interfaces.service.ServiceCivilCache" parent="serviceCivilServiceBase">
		<property name="target" ref="serviceCivilServiceTracing" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceCivil" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
		<property name="dataEventService" ref="dataEventService" />
	</bean>

	<alias alias="serviceCivilService" name="serviceCivilServiceCache"/>

	<!-- Service SecuritÃ© -->

	<bean id="serviceSecuriteServiceHost" class="ch.vd.uniregctb.interfaces.service.host.ServiceSecuriteHostInterfaces">
		<property name="serviceSecurite" ref="_serviceSecurite" />
	</bean>

	<bean id="serviceSecuriteServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServiceSecuriteTracing">
		<property name="target" ref="serviceSecuriteServiceHost" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceSecuriteCache" class="ch.vd.uniregctb.interfaces.service.ServiceSecuriteCache">
		<property name="target" ref="serviceSecuriteServiceTracing" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceSecurite" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>

	<alias alias="serviceSecuriteService" name="serviceSecuriteCache"/>

	<!-- Service PM -->
	
	<bean id="servicePersonneMoraleServiceHost" class="ch.vd.uniregctb.interfaces.service.host.ServicePersonneMoraleHostInterfaces">
		<property name="servicePersonneMorale" ref="_servicePersonneMorale" />
	</bean>

	<bean id="servicePersonneMoraleServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServicePersonneMoraleTracing">
		<property name="target" ref="servicePersonneMoraleServiceHost" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="servicePersonneMoraleServiceCache" class="ch.vd.uniregctb.interfaces.service.ServicePersonneMoraleCache">
		<property name="target" ref="servicePersonneMoraleServiceTracing" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="servicePM" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
		<property name="dataEventService" ref="dataEventService" />
	</bean>

	<alias alias="servicePersonneMoraleService" name="servicePersonneMoraleServiceCache"/>
	
</beans>
