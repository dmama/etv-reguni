<?xml version="1.0" encoding="UTF-8"?>
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<!-- Service Infrastructure -->
	
	<bean id="serviceInfrastructureServiceRaw" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureServiceImpl">
		<property name="serviceInfrastructure" ref="_serviceInfrastructure" />
	</bean>

	<bean id="serviceInfrastructureCache" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureCache">
		<property name="target" ref="serviceInfrastructureServiceRaw" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceInfra" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceInfrastructureTracing" class="ch.vd.uniregctb.interfaces.service.ServiceInfrastructureTracing">
		<property name="target" ref="serviceInfrastructureCache" />
		<property name="statsService" ref="statsService" />
	</bean>

	<alias alias="serviceInfrastructureService" name="serviceInfrastructureTracing"/>

	<!-- Service Civil -->

	<bean id="serviceCivilServiceBase" abstract="true" class="ch.vd.uniregctb.interfaces.service.ServiceCivilServiceBase">
		<property name="infraService" ref="serviceInfrastructureService"/>
	</bean>

	<bean id="serviceCivilServiceRaw" class="ch.vd.uniregctb.interfaces.service.ServiceCivilServiceImpl" parent="serviceCivilServiceBase">
		<property name="serviceCivil" ref="_serviceCivil" />
	</bean>

	<bean id="serviceCivilServiceCache" class="ch.vd.uniregctb.interfaces.service.ServiceCivilCache" parent="serviceCivilServiceBase">
		<property name="target" ref="serviceCivilServiceRaw" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceCivil" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceCivilServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServiceCivilTracing">
		<property name="target" ref="serviceCivilServiceCache" />
		<property name="statsService" ref="statsService" />
	</bean>
	
	<alias alias="serviceCivilService" name="serviceCivilServiceTracing"/>

	<!-- Service SecuritÃ© -->

	<bean id="serviceSecuriteServiceRaw" class="ch.vd.uniregctb.interfaces.service.ServiceSecuriteServiceImpl">
		<property name="serviceSecurite" ref="_serviceSecurite" />
	</bean>

	<bean id="serviceSecuriteCache" class="ch.vd.uniregctb.interfaces.service.ServiceSecuriteCache">
		<property name="target" ref="serviceSecuriteServiceRaw" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="serviceSecurite" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>

	<bean id="serviceSecuriteServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServiceSecuriteTracing">
		<property name="target" ref="serviceSecuriteCache" />
		<property name="statsService" ref="statsService" />
	</bean>

	<alias alias="serviceSecuriteService" name="serviceSecuriteServiceTracing"/>

	<!-- Service PM -->
	
	<bean id="servicePersonneMoraleServiceRaw" class="ch.vd.uniregctb.interfaces.service.ServicePersonneMoraleServiceImpl">
		<property name="servicePersonneMorale" ref="_servicePersonneMorale" />
	</bean>

	<bean id="servicePersonneMoraleServiceCache" class="ch.vd.uniregctb.interfaces.service.ServicePersonneMoraleCache">
		<property name="target" ref="servicePersonneMoraleServiceRaw" />
		<property name="cacheManager" ref="ehCacheManager" />
		<property name="cacheName" value="servicePM" />
		<property name="uniregCacheManager" ref="uniregCacheManager" />
		<property name="statsService" ref="statsService" />
	</bean>
	
	<bean id="servicePersonneMoraleServiceTracing" class="ch.vd.uniregctb.interfaces.service.ServicePersonneMoraleTracing">
		<property name="target" ref="servicePersonneMoraleServiceCache" />
		<property name="statsService" ref="statsService" />
	</bean>
	
	<alias alias="servicePersonneMoraleService" name="servicePersonneMoraleServiceTracing"/>
</beans>
