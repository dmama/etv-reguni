<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="serviceRF" class="ch.vd.uniregctb.registrefoncier.RegistreFoncierServiceImpl">
		<property name="transactionManager" ref="transactionManager"/>
		<property name="evenementRFImportDAO" ref="evenementRFImportDAO"/>
		<property name="evenementRFMutationDAO" ref="evenementRFMutationDAO"/>
		<property name="batchScheduler" ref="batchScheduler"/>
	</bean>

	<bean id="xmlHelperRF" class="ch.vd.uniregctb.registrefoncier.dataimport.XmlHelperRFImpl"/>

	<bean id="fichierImmeublesRFParser" class="ch.vd.uniregctb.registrefoncier.dataimport.FichierImmeublesRFParser">
		<property name="xmlHelperRF" ref="xmlHelperRF"/>
	</bean>

	<bean id="dataRFMutationsDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.DataRFMutationsDetector">
		<constructor-arg ref="ayantDroitRFDetector"/>
		<constructor-arg ref="batimentRFDetector"/>
		<constructor-arg ref="droitRFDetector"/>
		<constructor-arg ref="immeubleRFDetector"/>
		<constructor-arg ref="surfaceAuSolRFDetector"/>
	</bean>

	<bean id="ayantDroitRFDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.detector.AyantDroitRFDetector">
		<constructor-arg ref="xmlHelperRF"/>
		<constructor-arg ref="ayantDroitRFDAO"/>
		<constructor-arg ref="evenementRFImportDAO" />
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="transactionManager"/>
	</bean>

	<bean id="batimentRFDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.detector.BatimentRFDetector">
		<constructor-arg ref="xmlHelperRF"/>
		<constructor-arg ref="batimentRFDAO"/>
		<constructor-arg ref="evenementRFImportDAO" />
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="transactionManager"/>
	</bean>

	<bean id="droitRFDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.detector.DroitRFDetector">
		<constructor-arg ref="xmlHelperRF"/>
		<constructor-arg ref="ayantDroitRFDAO"/>
		<constructor-arg ref="evenementRFImportDAO" />
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="transactionManager"/>
		<constructor-arg ref="ayantDroitRFDetector"/>
		<constructor-arg ref="tempRFCacheDroits"/>
	</bean>

	<bean id="immeubleRFDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.detector.ImmeubleRFDetector">
		<constructor-arg ref="xmlHelperRF"/>
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="communeRFDAO"/>
		<constructor-arg ref="evenementRFImportDAO" />
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="transactionManager"/>
	</bean>

	<bean id="surfaceAuSolRFDetector" class="ch.vd.uniregctb.registrefoncier.dataimport.detector.SurfaceAuSolRFDetector">
		<constructor-arg ref="xmlHelperRF"/>
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="evenementRFImportDAO" />
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="transactionManager"/>
		<constructor-arg ref="tempRFCacheSurfaces"/>
	</bean>

	<bean id="dataRFMutationsProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.DataRFMutationsProcessor">
		<constructor-arg ref="evenementRFMutationDAO" />
		<constructor-arg ref="communeRFProcessor"/>
		<constructor-arg ref="immeubleRFProcessor"/>
		<constructor-arg ref="ayantDroitRFProcessor"/>
		<constructor-arg ref="droitRFProcessor"/>
		<constructor-arg ref="surfaceAuSolRFProcessor"/>
		<constructor-arg ref="batimentRFProcessor"/>
		<constructor-arg ref="transactionManager"/>
	</bean>

	<bean id="communeRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.CommuneRFProcessor">
		<constructor-arg ref="communeRFDAO" />
		<constructor-arg ref="serviceInfrastructureService" />
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="immeubleRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.ImmeubleRFProcessor">
		<constructor-arg ref="communeRFDAO"/>
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="ayantDroitRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.AyantDroitRFProcessor">
		<constructor-arg ref="ayantDroitRFDAO"/>
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="droitRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.DroitRFProcessor">
		<constructor-arg ref="ayantDroitRFDAO"/>
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="droitRFDAO"/>
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="surfaceAuSolRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.SurfaceAuSolRFProcessor">
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="surfaceAuSolRFDAO"/>
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="batimentRFProcessor" class="ch.vd.uniregctb.registrefoncier.dataimport.processor.BatimentRFProcessor">
		<constructor-arg ref="batimentRFDAO"/>
		<constructor-arg ref="immeubleRFDAO"/>
		<constructor-arg ref="xmlHelperRF"/>
	</bean>

	<bean id="rapprochementTiersRFProcessor" class="ch.vd.uniregctb.registrefoncier.processor.RapprochementTiersRFProcessor">
		<constructor-arg ref="transactionManager"/>
		<constructor-arg ref="tiersService"/>
		<constructor-arg ref="adresseService"/>
		<constructor-arg ref="rapprochementRFDAO"/>
		<constructor-arg ref="hibernateTemplate"/>
		<constructor-arg ref="identCtbService"/>
		<constructor-arg ref="rapprochementManuelTiersRFService"/>
	</bean>

	<bean id="communeRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.CommuneRFValidator" parent="dateRangeEntityValidator" />
	<bean id="droitRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.DroitRFValidator" parent="dateRangeEntityValidator" />
	<bean id="estimationRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.EstimationRFValidator" parent="dateRangeEntityValidator" />
	<bean id="implantationRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.ImplantationRFValidator" parent="dateRangeEntityValidator" />
	<bean id="situationRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.SituationRFValidator" parent="dateRangeEntityValidator" />
	<bean id="surfaceAuSolRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.SurfaceAuSolRFValidator" parent="dateRangeEntityValidator" />
	<bean id="surfaceBatimentRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.SurfaceBatimentRFValidator" parent="dateRangeEntityValidator" />
	<bean id="surfaceTotaleRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.SurfaceTotaleRFValidator" parent="dateRangeEntityValidator" />

	<bean id="rapprochementRFValidator" class="ch.vd.uniregctb.validation.registrefoncier.RapprochementRFValidator" parent="dateRangeEntityValidator">
		<property name="rapprochementDAO" ref="rapprochementRFDAO"/>
	</bean>

</beans>
