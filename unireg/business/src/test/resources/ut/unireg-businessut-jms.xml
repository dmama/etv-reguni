<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<bean id="jmsBroker" class="ch.vd.uniregctb.jms.StaticSingletonBrokerFactoryBean">
		<property name="config" value="classpath:ch/vd/uniregctb/jms/activemq-broker.xml" />
		<property name="start" value="true" />
	</bean>

	<bean id="jmsConnectionFactory" class="org.apache.activemq.pool.XaPooledConnectionFactory" init-method="start" destroy-method="stop">
		<property name="connectionFactory">
			<bean class="org.apache.activemq.ActiveMQXAConnectionFactory">
				<property name="brokerURL" value="vm://localhost" />
				<property name="userName" value="smx" />
				<property name="password" value="smx" />
			</bean>
		</property>
		<property name="maxConnections" value="20"/>
		<property name="transactionManager" ref="transactionManager" />
	</bean>

	<bean id="jmsResourceAdapter" class="org.springframework.jca.support.ResourceAdapterFactoryBean">
		<property name="resourceAdapter">
			<bean class="org.apache.activemq.ra.ActiveMQResourceAdapter">
				<property name="serverUrl" value="vm://localhost" />
				<property name="userName" value="smx" />
				<property name="password" value="smx" />
			</bean>
		</property>
		<property name="workManager">
			<bean class="org.springframework.jca.work.SimpleTaskWorkManager"/>
		</property>
	</bean>

	<bean id="identCtbMessageV1Handler" class="ch.vd.uniregctb.evenement.identification.contribuable.MockIdentificationContribuableMessageHandler"/>

	<bean id="evenementFiscalSender" class="ch.vd.uniregctb.evenement.fiscal.MockEvenementFiscalSender"/>

	<bean id="annonceIDESender" class="ch.vd.uniregctb.evenement.ide.MockAnnonceIDESender"/>

	<bean id="evenementDeclarationPPSender" class="ch.vd.uniregctb.evenement.di.MockEvenementDeclarationPPSender"/>
	<bean id="evenementDeclarationPMSender" class="ch.vd.uniregctb.evenement.declaration.MockEvenementDeclarationPMSender"/>

	<bean id="eFactureMessageSender" class="ch.vd.uniregctb.efacture.MockEFactureMessageSender" />

	<bean id="bamMessageSender" class="ch.vd.uniregctb.jms.MockBamMessageSender"/>

	<bean id="evtCivilEchProcessorRetry" class="ch.vd.uniregctb.evenement.civil.engine.ech.MockEvenementCivilEchRetryProcessor"/>

	<bean id="evtOrganisationProcessorRetry" class="ch.vd.uniregctb.evenement.organisation.engine.MockEvenementOrganisationRetryProcessor"/>

	<bean id="evtReqDesRetryProcessor" class="ch.vd.uniregctb.evenement.reqdes.engine.MockEvenementReqDesRetryProcessor"/>

	<bean id="evenementCivilEchStrategyParameters" class="ch.vd.uniregctb.evenement.civil.engine.ech.EvenementCivilEchStrategyParametersImpl">
		<property name="decalageMaxPourDepart" value="0"/>
	</bean>

	<bean id="raftEsbStore" class="ch.vd.uniregctb.evenement.MockRaftStore">
	</bean>

	<bean id="zipRaftEsbStore" class="ch.vd.uniregctb.evenement.MockRaftStore">
	</bean>

</beans>
