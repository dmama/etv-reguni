<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<bean id="abstractTiersController" parent="abstractSimpleFormController" abstract="true" class="ch.vd.uniregctb.tiers.AbstractTiersController">
		<property name="tiersMapHelper" ref="tiersMapHelper" />
		<property name="service" ref="tiersService" />
		<property name="paramApplicationManager" ref="paramApplicationManager" />
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<bean id="abstractTiersListController" parent="abstractTiersController" abstract="true" class="ch.vd.uniregctb.tiers.AbstractTiersListController">
		<property name="tiersService" ref="tiersService" />
		<property name="infraService" ref="serviceInfrastructureService" />
	</bean>

	<bean id="tiersMapHelper" class="ch.vd.uniregctb.tiers.TiersMapHelper" >
		<property name="infraService" ref="serviceInfrastructureService" />
	</bean>

	<bean id="autorisationManager" class="ch.vd.uniregctb.tiers.manager.AutorisationManagerImpl">
		<property name="tiersService" ref="tiersService" />
		<property name="serviceCivil" ref="serviceCivilService" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="tiersCriteriaValidator" class="ch.vd.uniregctb.tiers.validator.TiersCriteriaValidator" />

	<bean id="tiersLaunchCatController" class="ch.vd.uniregctb.tiers.TiersLaunchCatController" />

	<bean id="tiersVignetteController" class="ch.vd.uniregctb.tiers.vignette.VignetteController" >
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="tiersService" ref="tiersService" />
		<property name="adresseService" ref="adresseService" />
		<property name="infraService" ref="serviceInfrastructureService" />
		<property name="messageSource" ref="messageSource" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="validationController" class="ch.vd.uniregctb.validation.ValidationController">
		<property name="tiersDAO" ref="tiersDAO"/>
		<property name="adresseService" ref="adresseService"/>
		<property name="serviceCivil" ref="serviceCivilService"/>
		<property name="validationService" ref="validationService"/>
	</bean>

	<bean 	id="tiersListController"
			class="ch.vd.uniregctb.tiers.TiersListController"
			parent="abstractTiersListController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.TiersCriteriaView" />
		<property name="tiersListManager" ref="tiersListManager" />
		<property name="commandName" value="command" />
		<property name="service" ref="tiersService" />
		<property name="formView" value="tiers/recherche/list" />
		<property name="successView" value="list.do" />
		<property name="validator" ref="tiersCriteriaValidator" />
	</bean>

	<bean id="tiersVisuController" class="ch.vd.uniregctb.tiers.TiersVisuController" parent="abstractTiersController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.TiersVisuView" />
		<property name="tiersVisuManager" ref="tiersVisuManager" />
		<property name="tacheListManager" ref="tacheListManager" />
		<property name="formView" value="tiers/visualisation/visu" />
		<property name="successView" value="redirect:/tiers/list.do" />
	</bean>

	<bean id="rapportsPrestationListController" class="ch.vd.uniregctb.tiers.RapportsPrestationListController">
		<property name="manager" ref="tiersVisuManager" />
		<property name="controllerUtils" ref="controllerUtils"/>
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<bean id="tiersTimelineController" class="ch.vd.uniregctb.tiers.timeline.ForsTimelineController">
		<property name="tiersDao" ref="tiersDAO" />
		<property name="tiersService" ref="tiersService" />
		<property name="assujettissementService" ref="assujettissementService" />
		<property name="periodeImpositionService" ref="periodeImpositionService" />
		<property name="controllerUtils" ref="controllerUtils"/>
	</bean>

	<bean id="adresseTimelineController" class="ch.vd.uniregctb.tiers.timeline.AdresseTimelineController">
		<property name="tiersDao" ref="tiersDAO" />
		<property name="adresseService" ref="adresseService" />
		<property name="controllerUtils" ref="controllerUtils"/>
	</bean>

	<bean id="tiersCreateController" class="ch.vd.uniregctb.tiers.TiersCreateController" parent="abstractTiersController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.TiersEditView" />
		<property name="service" ref="tiersService" />
		<property name="formView" value="tiers/edition/edit" />
		<property name="tiersEditManager" ref="tiersEditManager" />
		<property name="validator" ref="tiersEditValidator" />
	</bean>
	
	<bean id="tiersEditValidator" class="ch.vd.uniregctb.tiers.validator.TiersEditValidator" >
		<property name="validationService" ref="validationService" />
	</bean>
	
	<bean id="tiersManager" class="ch.vd.uniregctb.tiers.manager.TiersManager">
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="adresseTiersDAO" ref="adresseTiersDAO" />
		<property name="webCivilService" ref="webCivilService" />
		<property name="serviceCivilService" ref="serviceCivilService" />
		<property name="hostPersonneMoraleService" ref="hostPersonneMoraleService" />
		<property name="adresseService" ref="adresseService" />
		<property name="adresseManager" ref="adresseManager" />
		<property name="tiersService" ref="tiersService" />
		<property name="serviceInfrastructureService" ref="serviceInfrastructureService" />
		<property name="tiersGeneralManager" ref="tiersGeneralManager" />
		<property name="situationFamilleService" ref="situationFamilleService" />
		<property name="rapportEntreTiersDAO" ref="rapportEntreTiersDAO" />
		<property name="servicePM" ref="servicePersonneMoraleService" />
		<property name="ibanValidator" ref="ibanValidator" />
		<property name="autorisationManager" ref="autorisationManager" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="tiersEditManager" class="ch.vd.uniregctb.tiers.manager.TiersEditManagerImpl"  parent="tiersManager">
	</bean>

	<bean id="tiersVisuManager" class="ch.vd.uniregctb.tiers.manager.TiersVisuManagerImpl" parent="tiersManager">
		<property name="mouvementVisuManager" ref="mouvementVisuManager"/>
	</bean>
	
	<bean id="tiersListManager" class="ch.vd.uniregctb.tiers.manager.TiersListManagerImpl">
		<property name="serviceInfrastructureService" ref="serviceInfrastructureService" />
	</bean>

	<bean id="lrVisuManager" class="ch.vd.uniregctb.tiers.manager.ListeRecapVisuManagerImpl">
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="tiersGeneralManager" ref="tiersGeneralManager" />
		<property name="lrDAO" ref="lrDAO" />
	</bean>

	<bean id="consultLogController" class="ch.vd.uniregctb.common.ConsultLogController">
		<property name="forFiscalDAO" ref="forFiscalDAO" />
		<property name="situationFamilleDAO" ref="situationFamilleDAO" />
		<property name="adresseTiersDAO" ref="adresseTiersDAO" />
		<property name="rapportEntreTiersDAO" ref="rapportEntreTiersDAO" />
		<property name="diDAO" ref="diDAO" />
		<property name="lrDAO" ref="lrDAO" />
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="tacheDAO" ref="tacheDAO" />
		<property name="droitAccesDAO" ref="droitAccesDAO" />
		<property name="mouvementDossierDAO" ref="mouvementDossierDAO" />
		<property name="evenementCivilRegPPDAO" ref="evenementCivilRegPPDAO" />
		<property name="evenementCivilEchDAO" ref="evenementCivilEchDAO" />
		<property name="identCtbDAO" ref="identCtbDAO" />
		<property name="periodiciteDAO" ref="periodiciteDAO" />
		<property name="etatDeclarationDAO" ref="etatDeclarationDAO" />
		<property name="immeubleDAO" ref="immeubleDAO" />
	</bean>

	<bean id="mouvementVisuController" class="ch.vd.uniregctb.tiers.MouvementVisuController">
		<property name="mouvementVisuManager" ref="mouvementVisuManager" />
	</bean>

	<bean id="abstractMouvementManager" abstract="true" class="ch.vd.uniregctb.mouvement.manager.AbstractMouvementManagerImpl">
		<property name="tiersGeneralManager" ref="tiersGeneralManager" />
		<property name="tiersService" ref="tiersService" />
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="adresseService" ref="adresseService" />
		<property name="serviceInfra" ref="serviceInfrastructureService" />
		<property name="serviceSecuriteService" ref="serviceSecuriteService" />
		<property name="mouvementDossierDAO" ref="mouvementDossierDAO" />
	</bean>

	<bean id="mouvementVisuManager" class="ch.vd.uniregctb.tiers.manager.MouvementVisuManagerImpl" parent="abstractMouvementManager"/>

	<bean id="tiersGeneralManager" class="ch.vd.uniregctb.general.manager.TiersGeneralManagerImpl">
		<property name="adresseService" ref="adresseService" />
		<property name="serviceCivilService" ref="serviceCivilService" />
		<property name="tiersService" ref="tiersService" />
		<property name="infraService" ref="serviceInfrastructureService"/>
	</bean>

	<bean id="utilisateurManager" class="ch.vd.uniregctb.general.manager.UtilisateurManagerImpl">
		<property name="serviceSecuriteService" ref="serviceSecuriteService" />
	</bean>

	<bean id="debiteurEditController" class="ch.vd.uniregctb.tiers.DebiteurEditController" parent="abstractTiersController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.DebiteurEditView" />
		<property name="formView" value="tiers/edition/debiteur/edit" />
		<property name="service" ref="tiersService" />
		<property name="tiersEditManager" ref="tiersEditManager" />
	</bean>

	<bean id="tiersPickerController" class="ch.vd.uniregctb.tiers.picker.TiersPickerController">
	</bean>

	<bean id="tiersPickerFilterFactory" class="ch.vd.uniregctb.tiers.picker.TiersPickerFilterFactory"/>

	<bean id="remarqueController" class="ch.vd.uniregctb.remarque.RemarqueController">
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="remarqueDAO" ref="remarqueDAO" />
		<property name="controllerUtils" ref="controllerUtils"/>
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<bean id="simulationController" class="ch.vd.uniregctb.simulation.SimulationController">
		<property name="forFiscalDAO" ref="forFiscalDAO" />
		<property name="tiersService" ref="tiersService" />
		<property name="tacheService" ref="tacheService" />
		<property name="validationService" ref="validationService" />
		<property name="forFiscalManager" ref="forFiscalManager" />
		<property name="transactionManager" ref="transactionManager" />
	</bean>

	<bean id="forsController" class="ch.vd.uniregctb.fors.ForsController">
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="messageSource" ref="messageSource" />
	</bean>

	<bean id="searchTiersController" class="ch.vd.uniregctb.search.SearchTiersController">
		<property name="searcher" ref="globalTiersSearcher" />
		<property name="applicationContext" ref="applicationContext" />
	</bean>

	<bean id="redirectController" class="ch.vd.uniregctb.redirect.RedirectController">
		<property name="infraService" ref="serviceInfrastructureService" />
	</bean>

</beans>
