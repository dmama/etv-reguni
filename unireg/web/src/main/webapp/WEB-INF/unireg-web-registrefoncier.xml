<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<!-- Import des données du RF -->

	<bean id="blacklistRFHelper" class="ch.vd.uniregctb.registrefoncier.dataimport.helper.BlacklistRFHelperImpl">
		<property name="blacklistedImmeubles" value="${extprop.rf.blacklist.immeubles}"/>
	</bean>

	<bean id="tempRFCacheDroits" class="ch.vd.unireg.cache.BerkeleyPersistentCache">
		<property name="homeDirectory" value="${extprop.rf.import.cache.homedir}/droits" />
		<property name="clazz" value="java.util.ArrayList" />
		<property name="cachePercent" value="${extprop.rf.import.cache.cachePercent}" />
		<property name="lockTimeout" value="${extprop.rf.import.cache.lockTimeout}" />
		<property name="syncOnCommit" value="false" />
	</bean>

	<bean id="tempRFCacheSurfaces" class="ch.vd.unireg.cache.BerkeleyPersistentCache">
		<property name="homeDirectory" value="${extprop.rf.import.cache.homedir}/surfaces" />
		<property name="clazz" value="java.util.ArrayList" />
		<property name="cachePercent" value="${extprop.rf.import.cache.cachePercent}" />
		<property name="lockTimeout" value="${extprop.rf.import.cache.lockTimeout}" />
		<property name="syncOnCommit" value="false" />
	</bean>

	<bean id="importRFController" class="ch.vd.uniregctb.registrefoncier.ImportRFController">
		<property name="serviceImportRF" ref="serviceImportRF" />
		<property name="evenementRFImportDAO" ref="evenementRFImportDAO" />
		<property name="evenementRFMutationDAO" ref="evenementRFMutationDAO" />
	</bean>

	<bean id="immeubleRFController" class="ch.vd.uniregctb.registrefoncier.immeuble.ImmeubleRFController">
		<property name="tiersDAO" ref="tiersDAO"/>
		<property name="immeubleRFDAO" ref="immeubleRFDAO"/>
		<property name="registreFoncierService" ref="serviceRF"/>
	</bean>

	<bean id="situationSurchargeRFController" class="ch.vd.uniregctb.registrefoncier.situation.surcharge.SituationSurchargeRFController">
		<property name="serviceInfrastructureService" ref="serviceInfrastructureService"/>
		<property name="situationRFDAO" ref="situationRFDAO"/>
		<property name="registreFoncierService" ref="serviceRF"/>
		<property name="urlGeoVD" value="${extprop.geo.vd.url}"/>
	</bean>

	<!-- Rapprochement des tiers RF avec les contribuables Unireg -->

	<bean id="rapprochementManuelTiersRFService" class="ch.vd.uniregctb.registrefoncier.RapprochementManuelTiersRFServiceImpl">
		<property name="queueRetourPourIdentification" value="${extprop.jms.queue.evtRapprochementTiersRF}"/>
		<property name="hibernateTemplate" ref="hibernateTemplate"/>
		<property name="emetteurDemandeIdentification" value="UNIREG"/>
		<property name="identCtbDAO" ref="identCtbDAO"/>
	</bean>

	<!-- Cleanup des données RF -->
	<bean id="cleanupImportRFRetainSize" class="java.lang.Integer">
		<constructor-arg value="${extprop.rf.cleanup.retain.size}"/>
	</bean>

</beans>
