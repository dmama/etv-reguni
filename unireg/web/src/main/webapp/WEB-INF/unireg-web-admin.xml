<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<bean id="tiersImportController" class="ch.vd.uniregctb.admin.TiersImportController">
		<property name="globalIndexer" ref="globalTiersIndexer" />
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="docService" ref="docService" />
		<property name="dbService" ref="databaseService" />
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<bean id="databasePreviewController" class="ch.vd.uniregctb.admin.DatabasePreviewController">
		<property name="tiersDao" ref="tiersDAO" />
		<property name="securityProvider" ref="securityProviderInterface"/>
		<property name="adresseService" ref="adresseService" />
	</bean>

	<!-- Accès à l'inbox -->
	<bean id="inboxController" class="ch.vd.uniregctb.admin.inbox.InboxController">
		<property name="inboxService" ref="inboxService"/>
		<property name="extractionService" ref="extractionService"/>
		<property name="pclManager" ref="printPCLManager"/>
	</bean>

	<!-- Gestion des batchs  -->
	<bean id="gestionBatchController" class="ch.vd.uniregctb.admin.GestionBatchController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.admin.BatchList" />
		<property name="formView" value="admin/batch" />
		<property name="successView" value="batch.do" />
		<property name="batchScheduler" ref="batchScheduler" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="batchController" class="ch.vd.uniregctb.admin.batch.BatchController">
		<property name="batchScheduler" ref="batchScheduler" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="queuesJmsController" class="ch.vd.uniregctb.admin.evenementExterne.QueuesJmsController">

		<property name="securityProvider" ref="securityProviderCache" />

		<property name="jmxManager">
			<map>
				<entry key="evenementsCivilsMasse" value-ref="evtCivilEchMasseEndpointManager"/>
				<entry key="evenementsCivilsIndividuel" value-ref="evtCivilEchIndividuelEndpointManager"/>
				<entry key="retourImpression" value-ref="evenementEditiqueEndpointManager"/>
				<entry key="evenementsExternes" value-ref="evenementExterneEndpointManager"/>
				<entry key="evenementsCedi" value-ref="evenementRetourDiEndpointManager"/>
				<entry key="identification" value-ref="jmsIdentCtbEndpointManager"/>
				<entry key="identificationOnline" value-ref="jmsIdentCtbEndpointManagerOnline"/>
				<entry key="evenementsIAM" value-ref="evenementIAMEndpointManager"/>
				<entry key="partyRequests" value-ref="partyRequestEndpointManager"/>
				<entry key="rapportTravailRequests" value-ref="rapportTravailRequestEndpointManager"/>
				<entry key="evenementsDeclaration" value-ref="evenementDeclarationEndpointManager"/>
				<entry key="evenementsEfacture" value-ref="evenementEfactureEndpointManager"/>
				<entry key="evenementsEfactureResponse" value-ref="evenementEfactureResponseEndpointManager"/>
				<entry key="reqDes" value-ref="reqdesEventEndpointManager"/>
				<entry key="evenementOrganisation" value-ref="evtOrganisationEndpointManager"/>
			</map>
		</property>
	</bean>

	<!-- Gestion de l'indexation  -->
	<bean id="gestionIndexationController" class="ch.vd.uniregctb.admin.GestionIndexationController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.admin.indexer.GestionIndexation" />
		<property name="formView" value="admin/indexation" />
		<property name="successView" value="indexation.do" />
		<property name="globalIndex" ref="globalTiersIndex" />
		<property name="indexationManager" ref="indexationManager" />
		<property name="serviceCivil" ref="serviceCivilService" />
		<property name="dataEventService" ref="dataEventService" />
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<bean id="indexationManager" class="ch.vd.uniregctb.admin.IndexationManagerImpl">
		<property name="tiersIndexer" ref="globalTiersIndexer" />
		<property name="dataEventService" ref="dataEventService"/>
		<property name="tiersDAO" ref="tiersDAO" />
	</bean>

	<!-- Gestion de tracing -->
	<bean id="gestionTracingController" class="ch.vd.uniregctb.admin.GestionTracingController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.admin.GestionTracing" />
		<property name="formView" value="admin/tracing" />
		<property name="successView" value="tracing.do" />
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<!-- Gestion de tracing -->
	<bean id="auditLogController" class="ch.vd.uniregctb.admin.AuditLogController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.admin.AuditLogBean" />
		<property name="formView" value="admin/audit" />
		<property name="successView" value="admin/audit" />
		<property name="auditLineDAO" ref="auditLineDAO" />
		<property name="transactionManager" ref="transactionManager" />
		<property name="hibernateTemplate" ref="hibernateTemplate" />
	</bean>

	<!-- Dump de la base de donnee -->
	<bean id="databaseDumpController" class="ch.vd.uniregctb.admin.DatabaseDumpController">
		<property name="sessionForm" value="true" />
		<property name="databaseService" ref="databaseService" />
		<property name="docService" ref="docService" />
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="batchScheduler" ref="batchScheduler" />
		<property name="successView" value="tiersImport/list.do" />
		<property name="transactionManager" ref="transactionManager" />
		<property name="securityProvider" ref="securityProviderInterface"/>
	</bean>

	<!-- Gestion des documents -->
	<bean id="documentController" class="ch.vd.uniregctb.document.DocumentController">
		<property name="sessionForm" value="true" />
		<property name="docService" ref="docService" />
		<property name="servletService" ref="servletService" />
		<property name="successView" value="../admin/tiersImport/list.do" /> <!-- msi: temp hack -->
	</bean>

	<!-- Gestion du recalcul des parentés -->
	<bean id="recalculParentesController" class="ch.vd.uniregctb.admin.RecalculParentesController">
		<property name="tiersService" ref="tiersService"/>
		<property name="securityProvider" ref="securityProviderInterface"/>
		<property name="dataEventService" ref="dataEventService"/>
	</bean>

	<!-- Gestion du recalcul du flag habitant -->
	<bean id="recalculFlagHabitant" class="ch.vd.uniregctb.admin.RecalculFlagHabitantController">
		<property name="tiersService" ref="tiersService"/>
		<property name="securityProvider" ref="securityProviderInterface"/>
		<property name="dataEventService" ref="dataEventService"/>
	</bean>

</beans>
