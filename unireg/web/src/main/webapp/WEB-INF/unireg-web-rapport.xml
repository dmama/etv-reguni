<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<bean id="abstractRapportPrestationController" parent="abstractSimpleFormController" abstract="true" class="ch.vd.uniregctb.rt.AbstractRapportPrestationController">
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="debiteurListController" class="ch.vd.uniregctb.rt.DebiteurListController" parent="abstractTiersListController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.rt.view.DebiteurListView" />
		<property name="commandName" value="command" />
		<property name="formView" value="tiers/edition/rt/debiteur/list" />
		<property name="successView" value="edit.do" />
		<property name="rapportPrestationEditManager" ref="rapportPrestationEditManager" />
		<property name="validator" ref="tiersCriteriaValidator"/>
	</bean>

	<bean id="sourcierListController" class="ch.vd.uniregctb.rt.SourcierListController" parent="abstractTiersListController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.rt.view.SourcierListView" />
		<property name="commandName" value="command" />
		<property name="formView" value="tiers/edition/rt/sourcier/list" />
		<property name="successView" value="edit.do" />
		<property name="rapportPrestationEditManager" ref="rapportPrestationEditManager" />
		<property name="validator" ref="tiersCriteriaValidator"/>
	</bean>

	<bean id="rapportPrestationEditController" class="ch.vd.uniregctb.rt.RapportPrestationEditController" parent="abstractRapportPrestationController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.rt.view.RapportPrestationView" />
		<property name="commandName" value="command" />
		<property name="rapportPrestationEditManager" ref="rapportPrestationEditManager" />
		<property name="formView" value="tiers/edition/rt/contrat/edit" />
		<property name="successView" value="/tiers/visu.do" />
		<property name="validator" ref="rapportPrestationValidator" />
	</bean>
	
	<bean id="rapportPrestationEditManager" class="ch.vd.uniregctb.rt.manager.RapportPrestationEditManagerImpl" >
		<property name="rapportEntreTiersDAO" ref="rapportEntreTiersDAO" />
		<property name="tiersService" ref="tiersService" />
		<property name="adresseService" ref="adresseService" />
		<property name="tiersGeneralManager" ref="tiersGeneralManager" />
		<property name="securityProvider" ref="securityProviderInterface" />
	</bean>

	<bean id="rapportPrestationValidator" class="ch.vd.uniregctb.rt.validator.RapportPrestationEditValidator" />

	<bean id="rapportController" class="ch.vd.uniregctb.rapport.RapportController">
		<property name="tiersDAO" ref="tiersDAO" />
		<property name="rapportEntreTiersDAO" ref="rapportEntreTiersDAO" />
		<property name="tiersService" ref="tiersService" />
		<property name="adresseService" ref="adresseService" />
		<property name="cacheWarmer" ref="serviceCivilCacheWarmer" />
		<property name="tiersMapHelper" ref="tiersMapHelper" />
		<property name="messageSource" ref="messageSource" />
		<property name="controllerUtils" ref="controllerUtils"/>
		<property name="securityProvider" ref="securityProviderInterface" />
		<property name="autorisationManager" ref="autorisationManager" />
		<property name="rapportEditManager" ref="rapportEditManager" />
		<property name="rapportEditValidator" ref="rapportValidator" />
	</bean>

	<bean id="rapportEditManager" class="ch.vd.uniregctb.rapport.manager.RapportEditManagerImpl" parent="tiersManager">
		<property name="tiersGeneralManager" ref="tiersGeneralManager" />
		<property name="tiersService" ref="tiersService" />
		<property name="adresseService" ref="adresseService" />
		<property name="rapportEntreTiersDAO" ref="rapportEntreTiersDAO" />
	</bean>

	<bean id="rapportValidator" class="ch.vd.uniregctb.rapport.validator.RapportEditValidator" >
		<property name="adresseService" ref="adresseService" />
		<property name="tiersDAO" ref="tiersDAO" />
	</bean>

	<bean id="dossiersApparentesEditController" class="ch.vd.uniregctb.tiers.DossiersApparentesEditController" parent="abstractTiersController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.TiersEditView" />
		<property name="formView" value="tiers/edition/rapport/edit" />
		<property name="rapportEditManager" ref="rapportEditManager" />
		<property name="tiersEditManager" ref="tiersEditManager" />
	</bean>

	<bean id="tiersRapportController" class="ch.vd.uniregctb.tiers.TiersRapportController" parent="abstractRapportPrestationController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.rapport.view.RapportView" />
		<property name="commandName" value="command" />
		<property name="formView" value="tiers/edition/rapport/rapport-modif" />
		<property name="successView" value="common/refresh-parent" />
		<property name="rapportEditManager" ref="rapportEditManager" />
		<property name="validator" ref="tiersRapportValidator" />
	</bean>

	<bean id="tiersRapportValidator" class="ch.vd.uniregctb.tiers.validator.TiersRapportValidator" />

	<bean id="rapportsPrestationEditController" class="ch.vd.uniregctb.tiers.RapportsPrestationEditController" parent="abstractTiersController">
		<property name="sessionForm" value="true" />
		<property name="commandClass" value="ch.vd.uniregctb.tiers.view.TiersEditView" />
		<property name="formView" value="tiers/edition/rt/edit" />
		<property name="tiersEditManager" ref="tiersEditManager" />
		<property name="rapportEditManager" ref="rapportEditManager" />
	</bean>

	<bean id="contribuableAssocieListController" class="ch.vd.uniregctb.contribuableAssocie.ContribuableAssocieController">
		<property name="tiersService" ref="tiersService"/>
		<property name="paramApplicationManager" ref="paramApplicationManager"/>
		<property name="criteriaValidator">
			<bean class="ch.vd.uniregctb.tiers.validator.TiersCriteriaValidator">
				<!-- allowsEmpty -->
				<constructor-arg value="true"/>
			</bean>
		</property>
		<property name="tiersMapHelper" ref="tiersMapHelper"/>
		<property name="controllerUtils" ref="controllerUtils"/>
	</bean>

	<bean id="activiteEconomiqueEditController" class="ch.vd.uniregctb.tiers.ActiviteEconomiqueEditController">
		<property name="tiersService" ref="tiersService"/>
		<property name="adresseService" ref="adresseService"/>
		<property name="hibernateTemplate" ref="hibernateTemplate"/>
		<property name="autorisationManager" ref="autorisationManager"/>
	</bean>

</beans>
