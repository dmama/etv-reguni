<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans	http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
							http://www.springframework.org/schema/util
							http://www.springframework.org/schema/util/spring-util-3.1.xsd">

	<util:list id="regpmHibernateAnnotatedClasses">
		<value>ch.vd.uniregctb.migration.pm.regpm.ContactEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.InscriptionRC</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.NumeroIDE</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RadiationRC</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RaisonSociale</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAdresseEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAdresseIndividu</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAllegementFiscal</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAppartenanceGroupeProprietaire</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAssocieSC</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmAssujettissement</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmBlocNotes</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmBlocNotesEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmBlocNotesEtablissement</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmCapital</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmCaracteristiquesIndividu</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmCollectiviteAdministrative</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmCommune</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmCritereSegmentation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmDecisionTaxation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmDemandeDelaiSommation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmDomicileEtablissement</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmDossierFiscal</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmEnvironnementTaxation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmEtablissement</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmEtablissementStable</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmEtatEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmExerciceCommercial</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmFinAssocieSC</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmFinFaillite</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmFinLiquidation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmFormeJuridique</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmForPrincipal</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmForSecondaire</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmFusion</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmGroupeProprietaire</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmImmeuble</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmIndividu</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmInstitutionFinanciere</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmLiquidateur</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmLiquidation</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmLocalitePostale</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmMandat</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmPrononceFaillite</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmQuestionnaireSNC</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmSiegeEntreprise</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmRattachementProprietaire</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmRegimeFiscalCH</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmRegimeFiscalVD</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmRue</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmTypeCollectiviteAdministrative</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmTypeContribution</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmTypeFormeJuridique</value>
		<value>ch.vd.uniregctb.migration.pm.regpm.RegpmTypeRegimeFiscal</value>
	</util:list>

	<!-- La session factory -->
	<bean id="regpmSessionFactory" class="ch.vd.shared.hibernate.config.DescriptiveSessionFactoryBean">
		<property name="description" value="RegPM"/>
		<property name="annotatedClasses" ref="regpmHibernateAnnotatedClasses" />
		<property name="dataSource" ref="regpmDataSource" />
		<property name="hibernateProperties" ref="regpmHibernateProperties" />
	</bean>

	<util:properties id="regpmHibernateProperties">
		<prop key="hibernate.connection.autocommit">false</prop>
		<prop key="hibernate.query.factory_class">org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory</prop>
		<prop key="hibernate.show_sql">false</prop>
		<prop key="hibernate.jdbc.batch_size">0</prop>
		<prop key="hibernate.jdbc.use_streams_for_binary">true</prop>
		<prop key="hibernate.dialect">org.hibernate.dialect.DB2390Dialect</prop>
		<!--<prop key="hibernate.query.substitutions"></prop>-->
		<prop key="hibernate.hbm2ddl.auto">none</prop>
		<prop key="hibernate.default_schema">${regpm.jdbc.schema}</prop>
	</util:properties>

	<bean id="regpmDataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
		<property name="driverClassName" value="${regpm.jdbc.driver.class}" />
		<property name="url" value="${regpm.jdbc.url}" />
		<property name="username" value="${regpm.jdbc.user}" />
		<property name="password" value="${regpm.jdbc.password}" />
		<property name="maxTotal" value="${regpm.jdbc.pool.size}" />
		<property name="maxIdle" value="${regpm.jdbc.pool.size}" />
		<property name="minIdle" value="0" />
		<property name="initialSize" value="0" />
		<property name="timeBetweenEvictionRunsMillis" value="10000"/>
	</bean>

	<bean id="regpmTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
		<property name="sessionFactory" ref="regpmSessionFactory"/>
	</bean>

</beans>
